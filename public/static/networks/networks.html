<!DOCTYPE html><html class=''>
<head>
    <meta charset='UTF-8'>
    <meta name="robots" content="noindex">
    <title>Esport Metrics</title>
<script type="text/javascript" src = "https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.4.4/math.js"></script>
<link rel='stylesheet' type='text/css' href='jspsych.css'>
<link rel='stylesheet' type='text/css' href='default_style.css'>
<link rel='stylesheet' type='text/css' href='style.css'>
</head>

<body>
<script src='js/jquery.min.js'></script>
<script src='js/math.min.js'></script>
<script src='js/jspsych/jspsych.js'></script>
<script src='js/jspsych/plugins/jspsych-text.js'></script>
<script src='js/jspsych/poldrack_plugins/jspsych-poldrack-text.js'></script>
<script src='js/jspsych/poldrack_plugins/jspsych-poldrack-categorize.js'></script>
<script src='js/jspsych/poldrack_plugins/jspsych-poldrack-instructions.js'></script>
<script src='js/jspsych/plugins/jspsych-call-function.js'></script>
<script src='js/jspsych/poldrack_plugins/jspsych-attention-check.js'></script>
<script src='js/jspsych/poldrack_plugins/jspsych-poldrack-single-stim.js'></script>
<script src='js/jspsych/plugins/jspsych-survey-text.js'></script>
 <script src='js/jspsych/plugins/jspsych-html.js'></script>
<script src='js/jspsych/poldrack_plugins/jspsych-single-stim-button.js'></script>
<script src='js/jspsych/poldrack_plugins/poldrack_utils.js'></script>
<script src='experiment_test_4.js'></script>

<script>

    const characters ='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789#&@$ÃŸ*!?%';

    function generateString(length) {
    let result = ' ';
    const charactersLength = characters.length;
    for ( let i = 0; i < length; i++ ) {
        result += characters.charAt(Math.floor(Math.random() * charactersLength));
    }

    return result;
    }
    var sub_id = generateString(6);
    var sub_id2 = sub_id.concat("_2")
    var sub_id3 = sub_id.concat("_3")


    function saveData(name, data){
      var xhr = new XMLHttpRequest();
      xhr.open('POST', 'write_data.php'); // 'write_data.php' is the path to the php file described above.
      xhr.setRequestHeader('Content-Type', 'application/json');
      xhr.send(JSON.stringify({filename: name, filedata: data}));
    }

      function savePerf(name, data){
        var xhr = new XMLHttpRequest();
        xhr.open('POST', 'write_perf.php'); // 'write_data.php' is the path to the php file described above.
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.send(JSON.stringify({filename: name, filedata: data}));
      }

      function collectData(){ 
          return JSON.stringify(resparr);
        }

      function saveVals(name, data){
        var xhr = new XMLHttpRequest();
        xhr.open('POST', 'write_vals.php'); // 'write_data.php' is the path to the php file described above.
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.send(JSON.stringify({filename: name, filedata: data}));
      }
      

        function collectData(){ 
          return JSON.stringify(resparr);
        }

        function collectPerf(){
          return JSON.stringify(perf);
        }

        function collectVals(){
          return JSON.stringify(valarr);
        }

    jsPsych.init({
             timeline: attention_network_task_experiment,
             exclusions: {
                min_width: 5000,
                min_height: 5000,
                audio: true
              },
             display_element: "getDisplayElement",
             fullscreen: true,
             on_trial_finish: function(data){
               addID('attention-network-task')
             },
             
             on_finish:
              function(){
                saveData("experiment_data_".concat(sub_id), collectPerf()),
                savePerf("experiment_data_".concat(sub_id2), collectData()),
                saveVals("experiment_data_".concat(sub_id3), collectVals());
                
              },

      });

</script>
</body>
</html>
